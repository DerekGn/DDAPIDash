<Page 
    xmlns:controls="using:DDPAIDash.Controls" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    x:Class="DDPAIDash.MainPage"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Page.Resources>
        <DataTemplate x:Key="TileTemplate">
            <controls:DeviceVideoViewer />
        </DataTemplate>
        <Style x:Key="TileStyle" TargetType="GridViewItem">
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0,0,8,8"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="TabNavigation" Value="Local"/>
        </Style>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="200"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <MediaElement x:Name="VideoMediaElement"
                      Grid.Row="0"
                      AutoPlay="true"
                      AreTransportControlsEnabled="True"
                      MediaFailed="MediaElement_MediaFailed"
                      Height="200">
        </MediaElement>
        <Pivot x:Name="MainPivot" Grid.Row="1">
            <PivotItem Header="Videos">
                <Grid x:Name="VideosGridRoot">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid x:Name="VideoGrid" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.Row="1">
                        <GridView x:Name="VideoGridView"
                                  Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
                                  ItemTemplate="{StaticResource TileTemplate}"
                                  ItemContainerStyle="{StaticResource TileStyle}"
                                  ShowsScrollingPlaceholders="False" 
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch" 
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" 
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                                  IsItemClickEnabled="True"
                                  ContainerContentChanging="VideoGridView_ContainerContentChanging" 
                                  ItemClick="VideoGridView_ItemClickHandler" 
                                  Holding="DisplayFlyoutOnHolding">
                            <FlyoutBase.AttachedFlyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem x:Name="VideoSaveButton" Text="Save" Click="VideoSaveButton_Click"/>
                                </MenuFlyout>
                            </FlyoutBase.AttachedFlyout>
                        </GridView>
                    </Grid>
                </Grid>
            </PivotItem>
            <PivotItem Header="Event Videos">
                <Grid x:Name="EventVideosGridRoot">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid x:Name="EventVideosGrid" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.Row="1">
                        <GridView x:Name="EventVideosGridView"
                                  Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
                                  ItemTemplate="{StaticResource TileTemplate}"
                                  ItemContainerStyle="{StaticResource TileStyle}"
                                  ShowsScrollingPlaceholders="False" 
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch" 
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" 
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                                  IsItemClickEnabled="True"
                                  ContainerContentChanging="EventVideosGridView_ContainerContentChanging" 
                                  Holding="DisplayFlyoutOnHolding" ItemClick="EventVideosGridView_ItemClick">
                            <FlyoutBase.AttachedFlyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem x:Name="EventVideoSaveButton" Text="Save" Click="EventVideoSaveButton_Click"/>
                                </MenuFlyout>
                            </FlyoutBase.AttachedFlyout>
                        </GridView>
                    </Grid>
                </Grid>
            </PivotItem>
            <PivotItem Header="Event Images">
                <Grid x:Name="EventImageGridRoot">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid x:Name="EventImageGrid" HorizontalAlignment="Left" VerticalAlignment="Top" Grid.Row="1">
                        <GridView x:Name="EventImageGridView"
                                  Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
                                  ItemTemplate="{StaticResource TileTemplate}"
                                  ItemContainerStyle="{StaticResource TileStyle}"
                                  ShowsScrollingPlaceholders="False" 
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch" 
                                  ScrollViewer.VerticalScrollBarVisibility="Auto" 
                                  ScrollViewer.HorizontalScrollBarVisibility="Auto" 
                                  IsItemClickEnabled="True"
                                  ContainerContentChanging="EventImageGridView_ContainerContentChanging" 
                                  Holding="DisplayFlyoutOnHolding"
                                  ItemClick="EventImageGridView_ItemClick">
                            <FlyoutBase.AttachedFlyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem x:Name="EventImageSaveButton" Text="Save" Click="EventImageSaveButton_Click"/>
                                </MenuFlyout>
                            </FlyoutBase.AttachedFlyout>
                        </GridView>
                    </Grid>
                </Grid>
            </PivotItem>
        </Pivot>
    </Grid>

    <Page.BottomAppBar>
        <CommandBar x:Name="MainCommandBar" ClosedDisplayMode="Minimal">
            <AppBarButton x:Name="BtnConnect" Click="btnConnect_Click" IsEnabled="{ Binding ConnectEnabled, Mode=TwoWay }">
                <AppBarButton.Icon>
                    <PathIcon Data="M20,7.50000047683716L23.2437057495117,8.15487289428711 25.8925476074219,9.94077014923096 27.6784439086914,12.5896120071411 28.3333168029785,15.8333158493042 27.6784439086914,19.0770301818848 25.8925476074219,21.7258892059326 23.2437057495117,23.5118045806885 20,24.1666851043701 16.7562961578369,23.5118045806885 14.1074542999268,21.7258892059326 12.3215579986572,19.0770301818848 11.6666851043701,15.8333158493042 12.3215579986572,12.5896120071411 14.1074542999268,9.94077014923096 16.7562961578369,8.15487289428711 20,7.50000047683716z M20,10L17.7293968200684,10.4584140777588 15.8752117156982,11.7085466384888 14.6250915527344,13.5627346038818 14.1666851043701,15.8333158493042 14.6250915527344,18.1039276123047 15.8752117156982,19.9581317901611 17.7293968200684,21.2082710266113 20,21.6666851043701 22.2705821990967,21.2082710266113 24.1247711181641,19.9581317901611 25.3749027252197,18.1039276123047 25.8333168029785,15.8333158493042 25.3749027252197,13.5627346038818 24.1247711181641,11.7085466384888 22.2705821990967,10.4584140777588 20,10z M19.5833168029785,15.0000009536743L20.4166831970215,15.0000009536743 21.3005523681641,15.3661117553711 21.6666851043701,16.25 21.3005523681641,17.1338882446289 20.4166831970215,17.5 19.5833168029785,17.5 18.6994285583496,17.1338882446289 18.3333168029785,16.25 18.6994285583496,15.3661117553711 19.5833168029785,15.0000009536743z M25.8333168029785,28.7500019073486L25.8333168029785,28.7668952941895 26.25,28.7500019073486 27.3853073120117,28.9460792541504 28.3124084472656,29.4464817047119 28.9374771118164,30.1194744110107 29.1666851043701,30.8333168029785 28.9374771118164,31.4820613861084 28.3124084472656,32.0118370056152 26.25,32.5 25.94215965271,32.4908447265625 23.2766265869141,30.6688899993896 20,30.0000019073486 16.7233695983887,30.6688899993896 14.0577907562256,32.4908447265625 13.7500009536743,32.5 11.6875925064087,32.0118370056152 11.0625228881836,31.4820613861084 10.8333158493042,30.8333168029785 11.0625228881836,30.1194744110107 11.6875925064087,29.4464817047119 12.6146945953369,28.9460792541504 13.7500009536743,28.7500019073486 14.1666851043701,28.7668952941895 14.1666851043701,28.7500019073486 15.4641647338867,28.4888191223145 16.5236968994141,27.845178604126 17.2380523681641,27.0289497375488 17.5,26.25 17.5,25.5434741973877 20,25.8333168029785 22.5,25.5434741973877 22.5,26.25 22.7619476318359,27.0289497375488 23.4763031005859,27.845178604126 24.5358352661133,28.4888191223145 25.8333168029785,28.7500019073486z"/>
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton x:Name="BtnLive" Click="BtnLive_Click" IsEnabled="{ Binding LiveEnabled, Mode=TwoWay }">
                <AppBarButton.Icon>
                    <PathIcon Data="M10,8.3333158493042L30.0000019073486,8.3333158493042 30.0000019073486,28.3333168029785 10,28.3333168029785 10,8.3333158493042z M14.1666316986084,10.8333692550659L14.1666316986084,17.5000534057617 25.8332633972168,17.5000534057617 25.8332633972168,10.8333692550659 14.1666316986084,10.8333692550659z M14.1666316986084,19.1667385101318L14.1666316986084,25.8333702087402 25.8332633972168,25.8333702087402 25.8332633972168,19.1667385101318 14.1666316986084,19.1667385101318z M12.0833158493042,10.0000524520874L11.1994276046753,10.3661642074585 10.8333158493042,11.2500524520874 11.1994276046753,12.1339406967163 12.0833158493042,12.5000524520874 12.9672040939331,12.1339406967163 13.3333158493042,11.2500524520874 12.9672040939331,10.3661642074585 12.0833158493042,10.0000524520874z M12.0833158493042,24.1666851043701L11.1994276046753,24.5327968597412 10.8333158493042,25.4166851043701 11.1994276046753,26.300573348999 12.0833158493042,26.6666851043701 12.9672040939331,26.300573348999 13.3333158493042,25.4166851043701 12.9672040939331,24.5327968597412 12.0833158493042,24.1666851043701z M12.0833158493042,20.6250534057617L11.1994276046753,20.9911651611328 10.8333158493042,21.8750534057617 11.1994276046753,22.7588958740234 12.0833158493042,23.125 12.9672040939331,22.7588958740234 13.3333158493042,21.8750534057617 12.9672040939331,20.9911651611328 12.0833158493042,20.6250534057617z M12.0833158493042,17.0833702087402L11.1994276046753,17.4494819641113 10.8333158493042,18.3333702087402 11.1994276046753,19.2172584533691 12.0833158493042,19.5833702087402 12.9672040939331,19.2172584533691 13.3333158493042,18.3333702087402 12.9672040939331,17.4494819641113 12.0833158493042,17.0833702087402z M12.0833158493042,13.5417375564575L11.1994276046753,13.9078493118286 10.8333158493042,14.7917375564575 11.1994276046753,15.6756057739258 12.0833158493042,16.0417366027832 12.9672040939331,15.6756057739258 13.3333158493042,14.7917375564575 12.9672040939331,13.9078493118286 12.0833158493042,13.5417375564575z M27.9166316986084,10.0000524520874L27.0327434539795,10.3661642074585 26.6666316986084,11.2500524520874 27.0327434539795,12.1339406967163 27.9166316986084,12.5000524520874 28.8005199432373,12.1339406967163 29.1666316986084,11.2500524520874 28.8005199432373,10.3661642074585 27.9166316986084,10.0000524520874z M27.9166316986084,24.1666851043701L27.0327434539795,24.5327968597412 26.6666316986084,25.4166851043701 27.0327434539795,26.300573348999 27.9166316986084,26.6666851043701 28.8005199432373,26.300573348999 29.1666316986084,25.4166851043701 28.8005199432373,24.5327968597412 27.9166316986084,24.1666851043701z M27.9166316986084,20.6250534057617L27.0327434539795,20.9911575317383 26.6666316986084,21.875 27.0327434539795,22.7588882446289 27.9166316986084,23.125 28.8005199432373,22.7588882446289 29.1666316986084,21.875 28.8005199432373,20.9911575317383 27.9166316986084,20.6250534057617z M27.9166316986084,17.0833702087402L27.0327434539795,17.4494819641113 26.6666316986084,18.3333702087402 27.0327434539795,19.2172584533691 27.9166316986084,19.5833702087402 28.8005199432373,19.2172584533691 29.1666316986084,18.3333702087402 28.8005199432373,17.4494819641113 27.9166316986084,17.0833702087402z M27.9166316986084,13.5416851043701L27.0327434539795,13.9078168869019 26.6666316986084,14.7916851043701 27.0327434539795,15.675573348999 27.9166316986084,16.0416851043701 28.8005199432373,15.675573348999 29.1666316986084,14.7916851043701 28.8005199432373,13.9078168869019 27.9166316986084,13.5416851043701z M14.1666316986084,30.0000019073486L15.0000009536743,30.0000019073486 15.0000009536743,33.3333168029785 16.6666851043701,33.3333168029785 16.6666851043701,34.1666870117188 15.0000009536743,34.1666870117188 14.1666316986084,34.1666870117188 14.1666316986084,30.0000019073486z M17.5,34.1666870117188L17.5,30.0000019073486 18.3333168029785,30.0000019073486 18.3333168029785,34.1666870117188 17.5,34.1666870117188z M19.375,30.0000019073486L20.4166316986084,30.0000019073486 21.25,32.7778434753418 22.0833168029785,30.0000019073486 23.125,30.0000019073486 21.6666851043701,34.1666870117188 21.6666316986084,34.1666870117188 20.8333168029785,34.1666870117188 20.8333168029785,34.1666870117188 19.375,30.0000019073486z M24.1666316986084,30.0000019073486L25,30.0000019073486 26.6666851043701,30.0000019073486 26.6666851043701,30.8333168029785 25,30.8333168029785 25,31.6666851043701 26.6666851043701,31.6666851043701 26.6666851043701,32.5 25,32.5 25,33.3333168029785 26.6666851043701,33.3333168029785 26.6666851043701,34.1666870117188 25,34.1666870117188 24.1666316986084,34.1666870117188 24.1666316986084,30.0000019073486z"/>
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton x:Name="BtnSettings" Click="btnSettings_Click" IsEnabled="{Binding SettingsEnabled, Mode=TwoWay}">
                <AppBarButton.Icon>
                    <PathIcon Data="M20,12.3684215545654L21.3335266113281,12.4845266342163 22.435525894165,9.75689506530762 25.3632125854492,10.9405269622803 24.2612648010254,13.6680002212524 26.3320007324219,15.7387380599976 29.0594749450684,14.6367902755737 30.2431049346924,17.564474105835 27.515474319458,18.6665267944336 27.6315803527832,20 27.515474319458,21.3335266113281 30.2431049346924,22.435525894165 29.0594749450684,25.3632125854492 26.3320007324219,24.2612648010254 24.4795799255371,26.1792125701904 25.6760005950928,28.8664207458496 22.7916316986084,30.1521587371826 21.5951061248779,27.4646320343018 20,27.6315803527832 18.6665267944336,27.515474319458 17.564474105835,30.2431602478027 14.6367902755737,29.0594749450684 15.7387380599976,26.332052230835 13.6679487228394,24.2612648010254 10.9405269622803,25.3632125854492 9.75684261322021,22.435525894165 12.4845266342163,21.333475112915 12.3684215545654,20 12.4845266342163,18.6665267944336 9.75684261322021,17.564474105835 10.9405269622803,14.6367902755737 13.6679487228394,15.7387380599976 15.5204734802246,13.8207368850708 14.3240528106689,11.133526802063 17.2083683013916,9.8478422164917 18.4049472808838,12.5353689193726 20,12.3684215545654z M20,14.7368431091309L17.9513301849365,15.1504516601563 16.2783756256104,16.2783946990967 15.1504440307617,17.9513530731201 14.7368431091309,20 15.1504440307617,22.0486698150635 16.2783756256104,23.7216262817383 17.9513301849365,24.8495578765869 20,25.2631587982178 22.0486488342285,24.8495578765869 23.721607208252,23.7216262817383 24.8495502471924,22.0486698150635 25.2631587982178,20 24.8495502471924,17.9513530731201 23.721607208252,16.2783946990967 22.0486488342285,15.1504516601563 20,14.7368431091309z"/>
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton x:Name="BtnFormat" Click="BtnFormat_Click" IsEnabled="{Binding FormatEnabled, Mode=TwoWay}">
                <AppBarButton.Icon>
                    <PathIcon Data="M30.8333168029785,24.1666851043701L30.8333168029785,30.0000019073486 10,30.0000019073486 10,24.1666851043701 15.2104215621948,24.1666851043701 17.0837841033936,25.1538963317871 19.2859992980957,25.9167366027832 22.3310604095459,26.4103355407715 25.0657386779785,26.3522109985352 25.0657386779785,24.1666851043701 30.8333168029785,24.1666851043701z M29.5833168029785,25.4166851043701L28.1249485015869,25.4166851043701 28.1249485015869,27.9166851043701 29.5832633972168,27.9166851043701 29.5833168029785,25.4166851043701z M24.0754222869873,25.4117889404297L21.836145401001,25.35915184021 19.3217372894287,24.8174743652344 17.2765464782715,24.1005706787109 15.5576906204224,23.1673812866211 14.2478313446045,22.0910816192627 13.4296321868896,20.9448432922363 16.9948425292969,17.3796329498291 24.0754222869873,20.0348949432373 24.0754222869873,25.4117889404297z M20.6792106628418,14.8273162841797L21.2129993438721,14.8614740371704 24.2130527496338,8.97357940673828 25.8269481658936,9.79589462280273 22.9180526733398,15.5049476623535 23.9259548187256,16.5895080566406 24.3018436431885,17.9971580505371 24.0214233398438,19.2221584320068 17.5868949890137,16.7243156433105 18.7869071960449,15.3569812774658 20.6792106628418,14.8273162841797z"/>
                </AppBarButton.Icon>
            </AppBarButton>
            <AppBarButton x:Name="BtnPair" Click="BtnPair_Click" IsEnabled="{Binding PairingEnabled, Mode=TwoWay}">
                <AppBarButton.Icon>
                    <PathIcon Data="M20,11.0526323318481L22.9968357086182,11.6020565032959 25.4663753509521,13.1046714782715 27.1745185852051,15.3419914245605 27.8871593475342,18.0955276489258 27.8947372436523,17.8947372436523 27.56298828125,15.7744283676147 26.6321067810059,13.8958959579468 28.0298881530762,15.2990970611572 29.0907649993896,16.9467449188232 29.7642841339111,18.7923622131348 30.0000019073486,20.7894744873047 29.7968368530273,22.6457195281982 29.2141513824463,24.3746318817139 27.0710678100586,27.3023052215576 23.8924503326416,29.2761936187744 22.0153465270996,29.8128776550293 20,30.0000019073486 17.9846534729004,29.8128776550293 16.107551574707,29.2761936187744 12.92893409729,27.3023052215576 10.7858505249023,24.3746318817139 10.2031650543213,22.6457195281982 10,20.7894744873047 10.2357168197632,18.7923374176025 10.909236907959,16.9467182159424 11.9701128005981,15.2990674972534 13.3678951263428,13.8958425521851 12.4370136260986,15.7744016647339 12.105263710022,17.8947372436523 12.1128425598145,18.0955276489258 12.8254833221436,15.3419914245605 14.5336246490479,13.1046714782715 17.0031661987305,11.6020565032959 20,11.0526323318481z M27.8947372436523,18.4210529327393L27.2743320465088,21.289176940918 25.5824279785156,23.6313171386719 23.0729942321777,25.210428237915 20,25.7894744873047 16.9270057678223,25.210428237915 14.4175729751587,23.6313171386719 12.7256689071655,21.289176940918 12.105263710022,18.4210529327393 12.105263710022,20.5263156890869 12.7256689071655,23.3533229827881 14.4175729751587,25.6049995422363 16.9270057678223,27.0936527252197 20,27.6315803527832 23.0729942321777,27.0936527252197 25.5824279785156,25.6049995422363 27.2743320465088,23.3533229827881 27.8947372436523,20.5263156890869 27.8947372436523,18.4210529327393z"/>
                </AppBarButton.Icon>
            </AppBarButton>
        </CommandBar>
    </Page.BottomAppBar>
</Page>
